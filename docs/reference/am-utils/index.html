<!DOCTYPE HTML><html lang=en-US><head><meta charset=UTF-8><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#404040><meta name=apple-mobile-web-app-title content="Advanced Macros"><meta name=application-name content="Advanced Macros"><meta name=msapplication-TileColor content=#404040><meta name=msapplication-TileImage content=/mstile-144x144.png><meta name=theme-color content=#404040><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/assets/css/main.css><link rel=stylesheet href=/assets/css/hl.css><script async src=/assets/js/main.js></script><title>AM Utils | Advanced Macros</title><meta itemprop=description name=description content="All of the functions listed on this page are found in<cod..."><meta property=og:locale content=en><meta property=og:type content=website><meta property=article:published_time content=2022-09-19T23:02:40+00:00><meta property=og:title content="AM Utils | Advanced Macros"><meta property=og:url content="https://advancedmacros.github.io/docs/reference/am-utils/"><meta property=og:site_name content="Advanced Macros"><meta property=article:author content="Advanced Macros"><meta property=og:description content="All of the functions listed on this page are found in<cod..."><meta itemprop=keywords><meta name=twitter:card content=summary><meta name=twitter:title content="AM Utils | Advanced Macros"><meta name=twitter:description content="All of the functions listed on this page are found in<cod..."><link rel=alternate type=application/atom+xml title="Advanced Macros" href=https://advancedmacros.github.io/feed.xml><link rel=canonical href="https://advancedmacros.github.io/docs/reference/am-utils/"></head><body class=wrap><header><div class=flexbox><div class=center-on-mobiles><h1><a href="/" class=logo><img height=65 srcset="/assets/logo/128.png 128w, /assets/logo/504.png 504w, /assets/logo/751.png 751w, /assets/logo/996.png 996w, /assets/logo/1218.png 1218w, /assets/logo/1425.png 1425w, /assets/logo/1613.png 1613w, /assets/logo/1786.png 1786w, /assets/logo/2160.png 2160w" style="max-height: 47px;" src=/assets/logo/504.png alt=Logo> <span style="vertical-align: top;">Advanced Macros</span></a></h1></div><nav class="main-nav hide-on-mobiles"><ul><li><a href="/">Home</a></li><li class=current><a href="/docs/">Docs</a></li><li><a href="/resources/">Resources</a></li><li><a href="/news/">News</a></li></ul></nav><div class="search hide-on-mobiles"></div><div class="meta hide-on-mobiles"><ul><li><a href=https://github.com/AdvancedMacros/AdvancedMacros.github.io/releases/tag/v9.0.2>v9.0.2</a></li><li><a href=https://github.com/AdvancedMacros>GitHub</a></li></ul></div></div><nav class="mobile-nav show-on-mobiles"><ul><li><a href="/">Home</a></li><li class=current><a href="/docs/">Docs</a></li><li><a href="/resources/">Resources</a></li><li><a href="/news/">News</a></li><li><a href=https://github.com/AdvancedMacros/AdvancedMacros.github.io>GitHub</a></li></ul></nav></header><section class=docs><div class=grid><div class="docs-nav-mobile unit whole show-on-mobiles"><select onchange="if (this.value) window.location.href=this.value"><option>Navigate the docs…</option><optgroup label="Getting Started"><option value="/docs/">Docs</option><option value="/docs/step-by-step/01-config/">Step by Step Tutorial</option></optgroup><optgroup label=Guides><option value="/docs/installation/">Installation</option><option value="/docs/quickstart/">Quickstart</option><option value="/docs/support/">Support</option><option value="/docs/troubleshooting/">Troubleshooting</option><option value="/docs/docs-setup/">Editing this site</option><option value="/guides/toggle-script/">Toggleable Script</option><option value="/guides/kwargs/">Named Args</option><option value="/guides/object-oriented-programming/">Object Oriented Programming</option></optgroup><optgroup label=Reference><option value="/docs/reference/events/">Events</option><option value="/docs/reference/functions/">Functions</option><option value="/docs/reference/hud2d/">HUD 2D</option><option value="/docs/reference/hud3d/">HUD 3D</option><option value="/docs/reference/useful-addons/">Useful Addons</option><option value="/docs/reference/am-utils/">AM Utils</option></optgroup><optgroup label=Tutorials><option value="/tutorials/inventory/">Automating the inventory</option><option value="/tutorials/gui/01-getting-started/">Build a GUI</option><option value="/tutorials/blah/">This is a tutorial</option><option value="/tutorials/blah-2/">This is another tutorial</option></optgroup></select></div><div class="unit four-fifths"><article><div class="improve right hide-on-mobiles"><a data-proofer-ignore href=https://github.com/AdvancedMacros/AdvancedMacros.github.io/edit/source/_docs/reference/am-utils.md><img src=https://advancedmacros.github.io/assets/feather/edit-2.svg alt="Edit icon"> <span>&nbsp;Improve this page</span></a></div><h1>AM Utils</h1><p>All of the functions listed on this page are found in</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
</code></pre></div></div><h3 id=asserttype>assertType <a href=#asserttype></a> <a href=#asserttype></a></h3><p><strong>assertType( String:type, *:value, String:functionName, String:argName/Num, Number:level)</strong></p><p>asserts that <code class="language-plaintext highlighter-rouge">value</code> is of type <code class="language-plaintext highlighter-rouge">type</code> else throws an error at <code class="language-plaintext highlighter-rouge">level</code> relative to caller with a message</p><p>“<code class="language-plaintext highlighter-rouge">functionName</code> arg <code class="language-plaintext highlighter-rouge">argName/Num</code> expected <code class="language-plaintext highlighter-rouge">type</code>, got <code class="language-plaintext highlighter-rouge">type(value)</code>”</p><p>The implementation of this function should be simplified in the future to retrieve <code class="language-plaintext highlighter-rouge">functionName</code> from debug info.</p><h3 id=keys>keys <a href=#keys></a> <a href=#keys></a></h3><p><strong>keys( Table:tbl ) -&gt; Table</strong></p><p>returns a table with numbered indices listing all keys in <code class="language-plaintext highlighter-rouge">tbl</code></p><h3 id=values>values <a href=#values></a> <a href=#values></a></h3><p><strong>values( Table:tbl ) -&gt; Table</strong></p><p>returns a table with numbered indices listing all values in <code class="language-plaintext highlighter-rouge">tbl</code></p><h3 id=asset>asSet <a href=#asset></a> <a href=#asset></a></h3><p><strong>asSet( Table:tbl ) -&gt; Table</strong></p><p>using <code class="language-plaintext highlighter-rouge">ipairs</code>, itterates the <code class="language-plaintext highlighter-rouge">tbl</code> to collect unique values and returns as a table.</p><h3 id=inverse>inverse <a href=#inverse></a> <a href=#inverse></a></h3><p><strong>inverse( Table:tbl ) -&gt; Table</strong></p><p>swaps keys and values in a copy of <code class="language-plaintext highlighter-rouge">tbl</code> then returns it.</p><h3 id=reduce>reduce <a href=#reduce></a> <a href=#reduce></a></h3><p><strong>reduce( Table:tbl, Function:func &lt;, *:i&gt; ) -&gt; return type from</strong> <code class="language-plaintext highlighter-rouge">func</code></p><p>applies a reducing function to all values in the <code class="language-plaintext highlighter-rouge">tbl</code> and returns the final result</p><p><code class="language-plaintext highlighter-rouge">i</code> is the inital value, defaults to the first element returned by <code class="language-plaintext highlighter-rouge">next</code>’s key</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>

<span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=p>{</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>}</span>
<span class=kd>local</span> <span class=n>r</span> <span class=o>=</span> <span class=n>utils</span><span class=p>.</span><span class=n>reduce</span><span class=p>(</span> 
    <span class=n>t</span><span class=p>,</span> 
    <span class=k>function</span><span class=p>(</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=p>)</span> 
        <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
    <span class=k>end</span>
<span class=p>)</span>
<span class=n>log</span><span class=p>(</span> <span class=n>r</span> <span class=p>)</span> <span class=c1>--30</span>

<span class=n>r</span> <span class=o>=</span> <span class=n>utils</span><span class=p>.</span><span class=n>reduce</span><span class=p>(</span> 
    <span class=n>t</span><span class=p>,</span> 
    <span class=k>function</span><span class=p>(</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=p>)</span> 
        <span class=k>return</span> <span class=n>a</span> <span class=o>+</span> <span class=n>b</span>
    <span class=k>end</span><span class=p>,</span>
    <span class=mi>8971</span>
<span class=p>)</span>
<span class=n>log</span><span class=p>(</span> <span class=n>r</span> <span class=p>)</span> <span class=c1>--9001</span>
</code></pre></div></div><h3 id=clone>clone <a href=#clone></a> <a href=#clone></a></h3><p><strong>clone( Table:tbl &lt;, Boolean:deep&gt; ) -&gt; Table</strong></p><p>Creates a shallow or deep clone of a given table.</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>

<span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=p>{</span>
    <span class=n>x</span> <span class=o>=</span> <span class=mi>45</span><span class=p>,</span>
    <span class=n>z</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>}</span>
<span class=p>}</span>
<span class=kd>local</span> <span class=n>u</span> <span class=o>=</span> <span class=n>utils</span><span class=p>.</span><span class=n>clone</span><span class=p>(</span> <span class=n>t</span> <span class=p>)</span> <span class=c1>--shallow copy</span>
<span class=kd>local</span> <span class=n>v</span> <span class=o>=</span> <span class=n>utils</span><span class=p>.</span><span class=n>clone</span><span class=p>(</span> <span class=n>t</span><span class=p>,</span> <span class=kc>true</span> <span class=p>)</span> <span class=c1>--deep</span>

<span class=n>log</span><span class=p>(</span> <span class=n>t</span>      <span class=o>==</span> <span class=n>u</span>      <span class=p>)</span> <span class=c1>--false</span>
<span class=n>log</span><span class=p>(</span> <span class=n>t</span><span class=p>.</span><span class=n>x</span>    <span class=o>==</span> <span class=n>u</span><span class=p>.</span><span class=n>x</span>    <span class=p>)</span> <span class=c1>-- true</span>
<span class=n>log</span><span class=p>(</span> <span class=n>t</span><span class=p>.</span><span class=n>z</span>    <span class=o>==</span> <span class=n>u</span><span class=p>.</span><span class=n>z</span>    <span class=p>)</span> <span class=c1>-- true refers to same table</span>
<span class=n>log</span><span class=p>(</span> <span class=n>t</span><span class=p>.</span><span class=n>z</span>    <span class=o>==</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span>    <span class=p>)</span> <span class=c1>-- false also a copy</span>
<span class=n>log</span><span class=p>(</span> <span class=n>t</span><span class=p>.</span><span class=n>z</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>v</span><span class=p>.</span><span class=n>z</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=p>)</span> <span class=c1>--true</span>
</code></pre></div></div><div class="note warning">Note: metatables are not copied</div><div class="note error">Deep clones will not handle recursion gracefully in the current version</div><h3 id=append>append <a href=#append></a> <a href=#append></a></h3><p><strong>append( Table:a, Table:b &lt;, Boolean:inPlace&gt; ) -&gt; Table</strong></p><p>Joins two tables using <code class="language-plaintext highlighter-rouge">ipairs</code>.</p><p>If <code class="language-plaintext highlighter-rouge">inPlace</code> is true, the returned table is <code class="language-plaintext highlighter-rouge">a</code>, else a new table</p><p><code class="language-plaintext highlighter-rouge">inPlace</code> defaults to false</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=kd>local</span> <span class=n>a</span> <span class=o>=</span> <span class=p>{</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>}</span>
<span class=kd>local</span> <span class=n>b</span> <span class=o>=</span> <span class=p>{</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>}</span>
<span class=kd>local</span> <span class=n>c</span> <span class=o>=</span> <span class=n>utils</span><span class=p>.</span><span class=n>append</span><span class=p>(</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span> <span class=p>)</span>
<span class=n>log</span><span class=p>(</span> <span class=n>c</span> <span class=p>)</span> <span class=c1>--{4,5,6,7,8,9}</span>
<span class=n>log</span><span class=p>(</span> <span class=n>a</span> <span class=p>)</span> <span class=c1>--{4,5,6}</span>
<span class=n>utils</span><span class=p>.</span><span class=n>append</span><span class=p>(</span> <span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=kc>true</span> <span class=p>)</span>
<span class=n>log</span><span class=p>(</span> <span class=n>a</span> <span class=p>)</span> <span class=c1>--{4,5,6,7,8,9}</span>
</code></pre></div></div><h3 id=map>map <a href=#map></a> <a href=#map></a></h3><p><strong>map( Table:tbl, Function:map &lt;,Boolean:mapKeys&gt; ) -&gt; Table</strong></p><p>Applies a function to all values in a table, the returned result is a new table.</p><p>If <code class="language-plaintext highlighter-rouge">mapKeys</code> is true, then <code class="language-plaintext highlighter-rouge">map</code> takes <code class="language-plaintext highlighter-rouge">2</code> args and returns <code class="language-plaintext highlighter-rouge">2</code> args (<code class="language-plaintext highlighter-rouge">key</code>,<code class="language-plaintext highlighter-rouge">value</code>)</p><p>else, <code class="language-plaintext highlighter-rouge">1</code> arg, <code class="language-plaintext highlighter-rouge">1</code> return (<code class="language-plaintext highlighter-rouge">value</code>)</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=kd>local</span> <span class=n>t</span> <span class=o>=</span> <span class=p>{</span>
    <span class=n>cows</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span>
    <span class=n>sheep</span> <span class=o>=</span> <span class=mi>11</span><span class=p>,</span>
    <span class=n>wolves</span> <span class=o>=</span> <span class=mi>3</span> 
<span class=p>}</span>

<span class=kd>local</span> <span class=n>a</span> <span class=o>=</span> <span class=n>utils</span><span class=p>.</span><span class=n>map</span><span class=p>(</span> 
    <span class=n>t</span><span class=p>,</span>
    <span class=k>function</span><span class=p>(</span> <span class=n>v</span> <span class=p>)</span>
        <span class=k>return</span> <span class=n>v</span> <span class=o>*</span> <span class=mi>2</span>
    <span class=k>end</span>
<span class=p>)</span>
<span class=n>log</span><span class=p>(</span> <span class=n>t</span> <span class=p>)</span> <span class=c1>--same table as above</span>
<span class=n>log</span><span class=p>(</span> <span class=n>a</span> <span class=p>)</span> <span class=c1>--{ cows=20, sheep=22, wolves=6 }</span>

<span class=kd>local</span> <span class=n>b</span> <span class=o>=</span> <span class=n>utils</span><span class=p>.</span><span class=n>map</span><span class=p>(</span> 
    <span class=n>t</span><span class=p>,</span>
    <span class=k>function</span><span class=p>(</span> <span class=n>k</span><span class=p>,</span><span class=n>v</span> <span class=p>)</span>
        <span class=k>return</span> <span class=n>k</span><span class=p>:</span><span class=n>upper</span><span class=p>(),</span> <span class=n>v</span> <span class=o>*</span> <span class=mi>2</span>
    <span class=k>end</span><span class=p>,</span>
    <span class=kc>true</span>
<span class=p>)</span>
<span class=n>log</span><span class=p>(</span> <span class=n>b</span> <span class=p>)</span> <span class=c1>--{ COWS=20, SHEEP=22, WOLVES=6 }</span>
</code></pre></div></div><h3 id=pickrandom>pickRandom <a href=#pickrandom></a> <a href=#pickrandom></a></h3><p><strong>( Table:options &lt;, Boolean:useKeys&gt; ) -&gt; ?</strong></p><p>Returns a random value from the table between index <code class="language-plaintext highlighter-rouge">1</code> to <code class="language-plaintext highlighter-rouge">#options</code></p><p>If <code class="language-plaintext highlighter-rouge">useKeys</code> is true then <code class="language-plaintext highlighter-rouge">advancedMacros.utils.keys</code> will be used to randomly pick a key</p><h3 id=startswith>startsWith <a href=#startswith></a> <a href=#startswith></a></h3><p><strong>startsWith( String:a, String:b &lt;,Boolean:caseSensitive&gt; ) -&gt; Boolean</strong></p><p>Returns true if <code class="language-plaintext highlighter-rouge">a</code> starts with <code class="language-plaintext highlighter-rouge">b</code></p><div class=note><code>caseSensitive</code> defaults to <code>false</code></div><h3 id=hastext>hasText <a href=#hastext></a> <a href=#hastext></a></h3><p><strong>hasText( Table:a, String:b ) -&gt; Table</strong> <strong>hasText( String:a, String:b ) -&gt; Boolean</strong></p><h4 id=when-a-is-a-table>When <code>a</code> is a Table <a href=#when-a-is-a-table></a> <a href=#when-a-is-a-table></a></h4><p>Returns a table of strings from <code class="language-plaintext highlighter-rouge">a</code> where <code class="language-plaintext highlighter-rouge">a[i]:find(b,1,true)</code> was true.</p><p>Iterates using <code class="language-plaintext highlighter-rouge">ipairs</code></p><h4 id=when-a-is-a-string>When <code>a</code> is a String <a href=#when-a-is-a-string></a> <a href=#when-a-is-a-string></a></h4><p>Returns true if the string <code class="language-plaintext highlighter-rouge">b</code> was found in <code class="language-plaintext highlighter-rouge">a</code>. Pattern matching is disabled</p><h3 id=intable>inTable <a href=#intable></a> <a href=#intable></a></h3><p><strong>inTable( *:value, Table:tbl ) -&gt; Boolean</strong></p><p>Returns true if <code class="language-plaintext highlighter-rouge">value</code> is one of the values in <code class="language-plaintext highlighter-rouge">tbl</code>.</p><p>Iterates using <code class="language-plaintext highlighter-rouge">pairs</code></p><h3 id=ftime>fTime <a href=#ftime></a> <a href=#ftime></a></h3><p><strong>fTime( Number:seconds &lt;, String:format&gt; ) -&gt; String</strong></p><p>Formats a time in seconds into something easier to read.</p><p>Default format: <code class="language-plaintext highlighter-rouge">"%02d:%02d:%02d"</code></p><p>If hours becomes larger than <code class="language-plaintext highlighter-rouge">24</code> the result will read like <code class="language-plaintext highlighter-rouge">1 days 00:00:00</code></p><h3 id=split>split <a href=#split></a> <a href=#split></a></h3><p><strong>split( String:text, String:deliminators ) -&gt; Table</strong></p><p>splits text by doing this:</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>out</span> <span class=o>=</span> <span class=p>{}</span>
<span class=k>for</span> <span class=n>a</span> <span class=k>in</span> <span class=n>text</span><span class=p>:</span><span class=n>gmatch</span><span class=p>(</span><span class=s2>"[^"</span><span class=o>..</span><span class=n>delims</span><span class=o>..</span><span class=s2>"]+"</span><span class=p>)</span> <span class=k>do</span>
  <span class=nb>table.insert</span><span class=p>(</span><span class=n>out</span><span class=p>,</span><span class=n>a</span><span class=p>)</span>
<span class=k>end</span>
<span class=k>return</span> <span class=n>out</span>
</code></pre></div></div><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>split</span><span class=p>(</span> <span class=s2>"hello world"</span><span class=p>,</span> <span class=s2>"eo"</span> <span class=p>)</span>  <span class=p>)</span> <span class=c1>-- {"h","ll w","rld"}</span>
</code></pre></div></div><h3 id=chararray>charArray <a href=#chararray></a> <a href=#chararray></a></h3><p><strong>charArray( String:str ) -&gt; Table</strong></p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>charArray</span><span class=p>(</span> <span class=s2>"foo"</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- {"f","o","o"}</span>
</code></pre></div></div><h3 id=splitwords>splitWords <a href=#splitwords></a> <a href=#splitwords></a></h3><p><strong>splitWords( String:text &lt;,Boolean:lower&gt; )</strong></p><p>Splits up <code class="language-plaintext highlighter-rouge">text</code> with a ` ` (space) deliminator</p><p><code class="language-plaintext highlighter-rouge">lower</code> default false, if true all strings have <code class="language-plaintext highlighter-rouge">:lower()</code> applied to them</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>splitWords</span><span class=p>(</span> <span class=s2>"hello world"</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- {"hello","world"}</span>
</code></pre></div></div><h3 id=capitalizewords>capitalizeWords <a href=#capitalizewords></a> <a href=#capitalizewords></a></h3><p><strong>capitalizeWords( String:text )</strong></p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>capitalizeWords</span><span class=p>(</span> <span class=s2>"hello world"</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- "Hello World"</span>
</code></pre></div></div><h3 id=maskstr>maskStr <a href=#maskstr></a> <a href=#maskstr></a></h3><p><strong>maskStr( base, mask, start ) -&gt; String</strong> Lets you impose one string on another</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>maskStr</span><span class=p>(</span> 
  <span class=s2>".........."</span> <span class=c1>-- 10 long</span>
  <span class=s2>"BAR"</span><span class=p>,</span>
  <span class=mi>3</span> 
<span class=p>))</span> <span class=c1>-- "..BAR....."</span>
</code></pre></div></div><h3 id=matchesoption>matchesOption <a href=#matchesoption></a> <a href=#matchesoption></a></h3><p><strong>matchesOption( String:name, String:option ) -&gt; Boolean</strong></p><p>Returns true if <code class="language-plaintext highlighter-rouge">option</code> is valid for auto-completion of <code class="language-plaintext highlighter-rouge">name</code></p><p><code class="language-plaintext highlighter-rouge">helm min</code> would be valid for <code class="language-plaintext highlighter-rouge">Minecraft Helmet</code> because <code class="language-plaintext highlighter-rouge">helm</code> and <code class="language-plaintext highlighter-rouge">min</code> are both the starts of words in <code class="language-plaintext highlighter-rouge">option</code></p><p>Used by <code class="language-plaintext highlighter-rouge">.autoComplete</code></p><h3 id=autocomplete>autoComplete <a href=#autocomplete></a> <a href=#autocomplete></a></h3><p><strong>autoComplete( String:text, Table:allOptions ) -&gt; Table</strong></p><p>Returns a list of auto-complete options for <code class="language-plaintext highlighter-rouge">text</code></p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>utils</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span>
<span class=kd>local</span> <span class=n>opts</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s2>"cow"</span><span class=p>,</span>
    <span class=s2>"sheep"</span><span class=p>,</span>
    <span class=s2>"crossbow"</span><span class=p>,</span>
    <span class=s2>"wooden pickaxe"</span><span class=p>,</span>
    <span class=s2>"wooden shovel"</span>
<span class=p>}</span>

<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>autoComplete</span><span class=p>(</span> <span class=s2>"c"</span><span class=p>,</span> <span class=n>opts</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- {"cow","crossbow"}</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>autoComplete</span><span class=p>(</span> <span class=s2>"sh"</span><span class=p>,</span> <span class=n>opts</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- {"sheep","wooden shovel"}</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>autoComplete</span><span class=p>(</span> <span class=s2>"r"</span><span class=p>,</span> <span class=n>opts</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- {} --no words start with "r"</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>autoComplete</span><span class=p>(</span> <span class=s2>"w"</span><span class=p>,</span> <span class=n>opts</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- {"wooden pickaxe","wooden shovel"}</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>autoComplete</span><span class=p>(</span> <span class=s2>"w p"</span><span class=p>,</span> <span class=n>opts</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- {"wooden pickaxe"} --has words that start with "w" and "p"</span>
<span class=n>log</span><span class=p>(</span> <span class=n>utils</span><span class=p>.</span><span class=n>autoComplete</span><span class=p>(</span> <span class=s2>""</span><span class=p>,</span> <span class=n>opts</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- everything, everything contains empty string</span>
</code></pre></div></div><h3 id=writefile>writeFile <a href=#writefile></a> <a href=#writefile></a></h3><p><strong>writeFile( String:text &lt;, String:file &lt;, Boolean:append» )</strong> <strong>writeFile( Table:tbl &lt;, String:file &lt;, Boolean:append» )</strong></p><p>Dumps text/table into a file.</p><p>Uses <code class="language-plaintext highlighter-rouge">advancedMacros.utils.serializeOrdered( tbl )</code> for tables</p><p><code class="language-plaintext highlighter-rouge">file</code> defaults to <code class="language-plaintext highlighter-rouge">debugOutput.txt</code> <code class="language-plaintext highlighter-rouge">append</code> defaults to <code class="language-plaintext highlighter-rouge">false</code></p><h3 id=multiget>multiGet <a href=#multiget></a> <a href=#multiget></a></h3><p><strong>multiGet( Table:tbl, Table:keys &lt;,Boolean:unpack&gt;) -&gt; Table/Varargs</strong></p><p>Returns a with only keys <code class="language-plaintext highlighter-rouge">keys</code> with values from <code class="language-plaintext highlighter-rouge">tbl</code></p><p>If <code class="language-plaintext highlighter-rouge">unpack</code> is true, the table is unpacked</p><h3 id=kwargs>kwargs <a href=#kwargs></a> <a href=#kwargs></a></h3><p><strong>kwargs( Table:argInfo, … ) -&gt; Table</strong></p><div class=note>See <a href=/kwargs>THIS</a> page for details</div><h3 id=typematches>typeMatches <a href=#typematches></a> <a href=#typematches></a></h3><p><strong>typeMatches( *:value, Table:options ) -&gt; Boolean</strong></p><p>Returns true if <code class="language-plaintext highlighter-rouge">type(value)</code> is present in <code class="language-plaintext highlighter-rouge">options</code> or</p><p><code class="language-plaintext highlighter-rouge">value</code> and <code class="language-plaintext highlighter-rouge">option</code> in <code class="language-plaintext highlighter-rouge">options</code> are a instance and class, where <code class="language-plaintext highlighter-rouge">value:isA( option )</code> is true or</p><p><code class="language-plaintext highlighter-rouge">value</code> is a class and <code class="language-plaintext highlighter-rouge">option</code> is a string starting with <code class="language-plaintext highlighter-rouge">class:</code> ending with the class name <strong>this loads the class using require to allow for child classes to be matched</strong></p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>typeMatches</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span><span class=p>.</span><span class=n>typeMatches</span>
<span class=kd>local</span> <span class=n>Foo</span> <span class=o>=</span> <span class=n>newClass</span><span class=s2>"theincgi.Foo"</span>
<span class=kd>local</span> <span class=n>Foo</span> <span class=o>=</span> <span class=n>newClass</span><span class=s2>"theincgi.Bar"</span>
<span class=kd>local</span> <span class=n>foo</span> <span class=o>=</span> <span class=n>Foo</span><span class=p>:</span><span class=n>new</span><span class=p>()</span>

<span class=n>log</span><span class=p>(</span> <span class=n>typeMatches</span><span class=p>(</span>   <span class=mi>10</span><span class=p>,</span> <span class=p>{</span><span class=s2>"number"</span><span class=p>,</span><span class=s2>"boolean"</span><span class=p>}</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- true</span>
<span class=n>log</span><span class=p>(</span> <span class=n>typeMatches</span><span class=p>(</span> <span class=kc>true</span><span class=p>,</span> <span class=p>{</span><span class=s2>"number"</span><span class=p>,</span><span class=s2>"boolean"</span><span class=p>}</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- true</span>
<span class=n>log</span><span class=p>(</span> <span class=n>typeMatches</span><span class=p>(</span> <span class=s2>"hi"</span><span class=p>,</span> <span class=p>{</span><span class=s2>"number"</span><span class=p>,</span><span class=s2>"boolean"</span><span class=p>}</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- false</span>
<span class=n>log</span><span class=p>(</span> <span class=n>typeMatches</span><span class=p>(</span>  <span class=n>foo</span><span class=p>,</span> <span class=p>{</span><span class=s2>"number"</span><span class=p>,</span> <span class=s2>"boolean"</span><span class=p>}</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- false</span>
<span class=n>log</span><span class=p>(</span> <span class=n>typeMatches</span><span class=p>(</span>  <span class=n>foo</span><span class=p>,</span> <span class=p>{</span><span class=n>Foo</span><span class=p>,</span> <span class=s2>"boolean"</span><span class=p>}</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- true</span>
<span class=n>log</span><span class=p>(</span> <span class=n>typeMatches</span><span class=p>(</span>  <span class=n>foo</span><span class=p>,</span> <span class=p>{</span><span class=s2>"class:theincgi.Foo"</span><span class=p>,</span><span class=s2>"boolean"</span><span class=p>}</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- true</span>
<span class=n>log</span><span class=p>(</span> <span class=n>typeMatches</span><span class=p>(</span>  <span class=n>foo</span><span class=p>,</span> <span class=p>{</span><span class=s2>"class:theincgi.Bar"</span><span class=p>,</span><span class=s2>"boolean"</span><span class=p>}</span> <span class=p>)</span> <span class=p>)</span> <span class=c1>-- false</span>
</code></pre></div></div><h3 id=serializeordered>serializeOrdered <a href=#serializeordered></a> <a href=#serializeordered></a></h3><p><strong>serializeOrdered( Table:tbl &lt;,Function sortFunction&gt; ) -&gt; String</strong></p><p>Returns a string representation of <code class="language-plaintext highlighter-rouge">tbl</code>.</p><p><code class="language-plaintext highlighter-rouge">sortFunction(a, b)</code> returns true if <code class="language-plaintext highlighter-rouge">a &lt; b</code></p><p>Default sort function:</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=k>function</span><span class=p>(</span> <span class=n>a</span><span class=p>,</span><span class=n>b</span> <span class=p>)</span>
    <span class=k>if</span> <span class=nb>type</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=o>~=</span><span class=nb>type</span><span class=p>(</span><span class=n>b</span><span class=p>)</span> <span class=k>then</span>
      <span class=k>return</span> <span class=nb>type</span><span class=p>(</span><span class=n>a</span><span class=p>)</span><span class=o>&lt;</span><span class=nb>type</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
    <span class=k>end</span>
    <span class=k>return</span> <span class=n>a</span><span class=o>&lt;</span><span class=n>b</span>
<span class=k>end</span>
</code></pre></div></div><h3 id=trycatch>tryCatch <a href=#trycatch></a> <a href=#trycatch></a></h3><p><strong>tryCatch{ try=Function &lt;,catch=function&gt; &lt;,finally=function&gt; &lt;,args=Table&gt; } -&gt; ?</strong></p><p>Attempts to call <code class="language-plaintext highlighter-rouge">try</code> with <code class="language-plaintext highlighter-rouge">args</code> unpacked as args (if present, no args otherwise)</p><p>If successful, run <code class="language-plaintext highlighter-rouge">finally</code> (if present) with no args</p><p>Returned value(s) is the returned value(s) from <code class="language-plaintext highlighter-rouge">try</code></p><p>If error, <code class="language-plaintext highlighter-rouge">catch</code> is run with the error from <code class="language-plaintext highlighter-rouge">xpcall</code> as it’s arg ( you are still in the xpcall and can use debug functions to retrieve stacktrace info ).</p><p><code class="language-plaintext highlighter-rouge">finally</code> is called with no args after <code class="language-plaintext highlighter-rouge">catch</code> completes</p><p>If <code class="language-plaintext highlighter-rouge">catch</code> returns any values <code class="language-plaintext highlighter-rouge">tryCatch</code> returns that instead.</p><div class=note>//TODO: give <code>catch</code> &amp; <code>finally</code> the same function environment as <code>try</code></div><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>tryCatch</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span><span class=p>.</span><span class=n>tryCatch</span>

<span class=kd>local</span> <span class=n>file</span>
<span class=kd>local</span> <span class=n>contents</span> <span class=o>=</span> <span class=n>tryCatch</span><span class=p>{</span>
    <span class=n>try</span> <span class=o>=</span> <span class=k>function</span><span class=p>(</span> <span class=o>...</span> <span class=p>)</span>
        <span class=n>file</span> <span class=o>=</span> <span class=n>filesystem</span><span class=p>.</span><span class=n>open</span><span class=p>(</span><span class=s2>"foo.txt"</span><span class=p>,</span><span class=s2>"r"</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>file</span><span class=p>.</span><span class=n>readLine</span><span class=p>()</span>
    <span class=k>end</span><span class=p>,</span>
    <span class=n>catch</span> <span class=o>=</span> <span class=k>function</span><span class=p>(</span> <span class=n>err</span> <span class=p>)</span>
        <span class=n>log</span><span class=p>(</span><span class=s2>"Could not read file! &amp;c"</span><span class=o>..</span><span class=n>err</span><span class=p>)</span>
        <span class=k>return</span> <span class=kc>false</span>
    <span class=k>end</span><span class=p>,</span>
    <span class=n>finally</span><span class=o>=</span><span class=k>function</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>file</span> <span class=k>then</span>
            <span class=n>file</span><span class=p>.</span><span class=n>close</span><span class=p>()</span>
        <span class=k>end</span>
    <span class=k>end</span>
<span class=p>}</span>

<span class=n>log</span><span class=p>(</span> <span class=n>contents</span> <span class=p>)</span> <span class=c1>--first line of file or false</span>
</code></pre></div></div><h3 id=weightedrandom>weightedRandom <a href=#weightedrandom></a> <a href=#weightedrandom></a></h3><p><strong>weightedRandom( Table:options ) -&gt; ?</strong></p><p>given a table <code class="language-plaintext highlighter-rouge">options</code> with each key being a possible return value and the value being a weight, return something randomly</p><div class="language-lua highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=kd>local</span> <span class=n>wRandom</span> <span class=o>=</span> <span class=n>advancedMacros</span><span class=p>.</span><span class=n>utils</span><span class=p>.</span><span class=n>weightedRandom</span>

<span class=kd>local</span> <span class=n>x</span> <span class=o>=</span> <span class=p>{</span>
    <span class=s2>"foo"</span> <span class=o>=</span> <span class=mi>10</span><span class=p>,</span> <span class=c1>-- 10 / 20 chance</span>
    <span class=s2>"bar"</span> <span class=o>=</span> <span class=mi>4</span><span class=p>,</span>  <span class=c1>--  4 / 20 chance</span>
    <span class=s2>"cow"</span> <span class=o>=</span> <span class=mi>6</span>   <span class=c1>--  6 / 20 chance</span>
<span class=p>}</span>
<span class=c1>--20 is total of 10 + 4 + 6</span>
<span class=kd>local</span> <span class=n>y</span> <span class=o>=</span> <span class=n>wRandom</span><span class=p>(</span> <span class=n>x</span> <span class=p>)</span>
</code></pre></div></div><h3 id=utilsinrect>utils.inRect <a href=#utilsinrect></a> <a href=#utilsinrect></a></h3><p><strong>inRect( Number:testX, Number: testY, Number:boxX, Number:boxY, Number:boxWidth, Number:boxHeight) -&gt; Boolean</strong></p><p>Check if a point <code class="language-plaintext highlighter-rouge">testX, testY</code> exists in a box starting at <code class="language-plaintext highlighter-rouge">boxX, boxY</code> with size <code class="language-plaintext highlighter-rouge">boxWidth, boxHeight</code></p></article></div><div class="unit one-fifth hide-on-mobiles"><aside><h4>Getting Started</h4><ul><li><a href="/docs/">Docs</a></li><li><a href="/docs/step-by-step/01-config/">Step by Step Tutorial</a></li></ul><h4>Guides</h4><ul><li><a href="/docs/installation/">Installation</a></li><li><a href="/docs/quickstart/">Quickstart</a></li><li><a href="/docs/support/">Support</a></li><li><a href="/docs/troubleshooting/">Troubleshooting</a></li><li><a href="/docs/docs-setup/">Editing this site</a></li><li><a href="/guides/toggle-script/">Toggleable Script</a></li><li><a href="/guides/kwargs/">Named Args</a></li><li><a href="/guides/object-oriented-programming/">Object Oriented Programming</a></li></ul><h4>Reference</h4><ul><li><a href="/docs/reference/events/">Events</a></li><li><a href="/docs/reference/functions/">Functions</a></li><li><a href="/docs/reference/hud2d/">HUD 2D</a></li><li><a href="/docs/reference/hud3d/">HUD 3D</a></li><li><a href="/docs/reference/useful-addons/">Useful Addons</a></li><li class=current><a href="/docs/reference/am-utils/">AM Utils</a></li></ul><h4>Tutorials</h4><ul><li><a href="/tutorials/inventory/">Automating the inventory</a></li><li><a href="/tutorials/gui/01-getting-started/">Build a GUI</a></li><li><a href="/tutorials/blah/">This is a tutorial</a></li><li><a href="/tutorials/blah-2/">This is another tutorial</a></li></ul><h4>Contents</h4><ul><li><a href=#asserttype>assertType</a></li><li><a href=#keys>keys</a></li><li><a href=#values>values</a></li><li><a href=#asset>asSet</a></li><li><a href=#inverse>inverse</a></li><li><a href=#reduce>reduce</a></li><li><a href=#clone>clone</a></li><li><a href=#append>append</a></li><li><a href=#map>map</a></li><li><a href=#pickrandom>pickRandom</a></li><li><a href=#startswith>startsWith</a></li><li><a href=#hastext>hasText</a></li><li><a href=#intable>inTable</a></li><li><a href=#ftime>fTime</a></li><li><a href=#split>split</a></li><li><a href=#chararray>charArray</a></li><li><a href=#splitwords>splitWords</a></li><li><a href=#capitalizewords>capitalizeWords</a></li><li><a href=#maskstr>maskStr</a></li><li><a href=#matchesoption>matchesOption</a></li><li><a href=#autocomplete>autoComplete</a></li><li><a href=#writefile>writeFile</a></li><li><a href=#multiget>multiGet</a></li><li><a href=#kwargs>kwargs</a></li><li><a href=#typematches>typeMatches</a></li><li><a href=#serializeordered>serializeOrdered</a></li><li><a href=#trycatch>tryCatch</a></li><li><a href=#weightedrandom>weightedRandom</a></li><li><a href=#utilsinrect>utils.inRect</a></li></ul></aside></div><div class=clear></div></div></section><footer><div class=grid><div class="unit two-thirds center-on-mobiles"><p>The source for Advanced Macros is avalable <a href=https://github.com/AdvancedMacros>on GitHub</a>.</p></div><div class="unit one-third align-right center-on-mobiles"><p>The contents of this website are<br>&copy;&nbsp;2022 under the terms of the <a href=https://github.com/AdvancedMacros/AdvancedMacros.github.io/blob/source/LICENSE>MIT&nbsp;License</a>.</p></div></div></footer></body></html>